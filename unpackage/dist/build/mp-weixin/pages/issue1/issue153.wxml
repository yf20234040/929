<view class="container data-v-bb0ee2b6"><view class="content data-v-bb0ee2b6"><view class="grid-layout data-v-bb0ee2b6"><block wx:for="{{mediaList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['openPreview',['$0'],[[['mediaList','',index]]]]]]]}}" class="media-card data-v-bb0ee2b6" bindtap="__e"><view class="media-container data-v-bb0ee2b6"><block wx:if="{{item.type==='image'}}"><image class="media-item data-v-bb0ee2b6" src="{{item.url}}" mode="aspectFill" lazy-load="{{true}}"></image></block><block wx:if="{{item.type==='video'}}"><view class="video-placeholder data-v-bb0ee2b6"><image class="media-item data-v-bb0ee2b6" src="{{item.coverUrl||defaultVideoCover}}" mode="aspectFill" lazy-load="{{true}}"></image><view class="video-tag data-v-bb0ee2b6"><text class="play-icon data-v-bb0ee2b6">▶</text></view></view></block></view><view class="media-desc data-v-bb0ee2b6"><text class="data-v-bb0ee2b6">{{item.description}}</text></view></view></block></view></view><block wx:if="{{previewVisible}}"><view class="preview-overlay data-v-bb0ee2b6"><view class="preview-container data-v-bb0ee2b6"><view class="preview-content data-v-bb0ee2b6"><block wx:if="{{currentMedia&&currentMedia.type==='image'}}"><image class="preview-image data-v-bb0ee2b6" src="{{currentMedia.url}}" mode="widthFix" data-event-opts="{{[['tap',[['closePreview',['$event']]]]]}}" bindtap="__e"></image></block><block wx:if="{{currentMedia&&currentMedia.type==='video'}}"><video class="preview-video data-v-bb0ee2b6" src="{{currentMedia.url}}" controls="{{false}}" autoplay="{{isPlaying}}" loop="{{false}}" enable-fullscreen="{{true}}" id="videoPlayer" data-event-opts="{{[['timeupdate',[['updateProgress',['$event']]]],['ended',[['onVideoEnded',['$event']]]],['tap',[['handleVideoTap',['$event']]]]]}}" bindtimeupdate="__e" bindended="__e" bindtap="__e"></video></block></view><block wx:if="{{currentMedia&&currentMedia.type==='video'}}"><view class="video-controls data-v-bb0ee2b6"><view data-event-opts="{{[['tap',[['togglePlayPause',['$event']]]]]}}" class="control-btn play-pause-btn data-v-bb0ee2b6" bindtap="__e"><text class="control-icon data-v-bb0ee2b6">{{isPlaying?'||':'▶'}}</text></view><view class="progress-container data-v-bb0ee2b6"><view data-event-opts="{{[['tap',[['seekVideo',['$event']]]]]}}" class="video-progress data-v-bb0ee2b6" bindtap="__e"><view class="progress-bar data-v-bb0ee2b6" style="{{'width:'+(progress+'%')+';'}}"></view><view class="progress-thumb data-v-bb0ee2b6" style="{{'left:'+(progress+'%')+';'}}"></view></view><view class="time-display data-v-bb0ee2b6"><text class="data-v-bb0ee2b6">{{$root.m0}}</text><text class="data-v-bb0ee2b6">/</text><text class="data-v-bb0ee2b6">{{$root.m1}}</text></view></view><view data-event-opts="{{[['tap',[['closePreview',['$event']]]]]}}" class="control-btn close-btn data-v-bb0ee2b6" bindtap="__e"><text class="control-icon data-v-bb0ee2b6">↩</text></view></view></block></view></view></block></view>