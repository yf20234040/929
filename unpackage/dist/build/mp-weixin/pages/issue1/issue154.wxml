<view class="container data-v-9a00c1dc"><view class="content data-v-9a00c1dc"><view class="grid-layout data-v-9a00c1dc"><block wx:for="{{mediaList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['openPreview',['$0'],[[['mediaList','',index]]]]]]]}}" class="media-card data-v-9a00c1dc" bindtap="__e"><view class="media-container data-v-9a00c1dc"><block wx:if="{{item.type==='image'}}"><image class="media-item data-v-9a00c1dc" src="{{item.url}}" mode="aspectFill" lazy-load="{{true}}"></image></block><block wx:if="{{item.type==='video'}}"><view class="video-placeholder data-v-9a00c1dc"><image class="media-item data-v-9a00c1dc" src="{{item.coverUrl||item.firstFrameUrl||defaultVideoCover}}" mode="aspectFill" lazy-load="{{true}}"></image><view class="video-tag data-v-9a00c1dc"><text class="play-icon data-v-9a00c1dc">▶</text></view><block wx:if="{{!item.firstFrameUrl&&!item.coverUrl}}"><video class="cover-capture-video data-v-9a00c1dc" id="{{'video-'+item.id}}" src="{{item.url}}" autoplay="{{true}}" playsinline="{{true}}" data-event-opts="{{[['timeupdate',[['captureVideoFrame',['$0','$event'],[[['mediaList','',index]]]]]],['loadedmetadata',[['setCaptureTime',['$0'],[[['mediaList','',index]]]]]],['error',[['handleVideoError',['$0'],[[['mediaList','',index]]]]]]]}}" muted="{{true}}" bindtimeupdate="__e" bindloadedmetadata="__e" binderror="__e"></video></block></view></block></view><view class="media-desc data-v-9a00c1dc"><text class="data-v-9a00c1dc">{{item.description}}</text></view></view></block></view></view><block wx:if="{{previewVisible}}"><view class="preview-overlay data-v-9a00c1dc"><view class="preview-container data-v-9a00c1dc"><view class="preview-content data-v-9a00c1dc"><block wx:if="{{currentMedia&&currentMedia.type==='image'}}"><image class="preview-image data-v-9a00c1dc" src="{{currentMedia.url}}" mode="widthFix" data-event-opts="{{[['tap',[['closePreview',['$event']]]]]}}" bindtap="__e"></image></block><block wx:if="{{currentMedia&&currentMedia.type==='video'}}"><video class="preview-video data-v-9a00c1dc" src="{{currentMedia.url}}" controls="{{false}}" autoplay="{{isPlaying}}" loop="{{false}}" enable-fullscreen="{{true}}" id="videoPlayer" data-event-opts="{{[['timeupdate',[['updateProgress',['$event']]]],['ended',[['onVideoEnded',['$event']]]],['tap',[['handleVideoTap',['$event']]]]]}}" bindtimeupdate="__e" bindended="__e" bindtap="__e"></video></block></view><block wx:if="{{currentMedia&&currentMedia.type==='video'}}"><view class="video-controls data-v-9a00c1dc"><view data-event-opts="{{[['tap',[['togglePlayPause',['$event']]]]]}}" class="control-btn play-pause-btn data-v-9a00c1dc" bindtap="__e"><text class="control-icon data-v-9a00c1dc">{{isPlaying?'⏸':'▶'}}</text></view><view class="progress-container data-v-9a00c1dc"><view data-event-opts="{{[['tap',[['seekVideo',['$event']]]]]}}" class="video-progress data-v-9a00c1dc" bindtap="__e"><view class="progress-bar data-v-9a00c1dc" style="{{'width:'+(progress+'%')+';'}}"></view><view class="progress-thumb data-v-9a00c1dc" style="{{'left:'+(progress+'%')+';'}}"></view></view><view class="time-display data-v-9a00c1dc"><text class="data-v-9a00c1dc">{{$root.m0}}</text><text class="data-v-9a00c1dc">/</text><text class="data-v-9a00c1dc">{{$root.m1}}</text></view></view><view data-event-opts="{{[['tap',[['closePreview',['$event']]]]]}}" class="control-btn close-btn data-v-9a00c1dc" bindtap="__e"><text class="control-icon data-v-9a00c1dc">↩</text></view></view></block></view></view></block></view>