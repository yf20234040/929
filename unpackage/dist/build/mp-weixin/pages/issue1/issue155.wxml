<view class="media-gallery data-v-0401bfc3"><block wx:if="{{!isDetailMode}}"><view class="thumbnail-grid data-v-0401bfc3"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['enterDetailMode',[index]]]],['longpress',[['showActionSheet',[index]]]]]}}" class="media-item data-v-0401bfc3" bindtap="__e" bindlongpress="__e"><block wx:if="{{item.$orig.type==='image'}}"><image class="media-thumbnail data-v-0401bfc3" src="{{item.$orig.url}}" mode="aspectFill"></image></block><block wx:if="{{item.$orig.type==='video'}}"><view class="video-thumbnail-container data-v-0401bfc3"><image class="media-thumbnail data-v-0401bfc3" src="{{item.m0}}" mode="aspectFill"></image><view class="video-play-icon data-v-0401bfc3"><view class="play-triangle data-v-0401bfc3"></view></view></view></block><view class="{{['media-type-tag','data-v-0401bfc3',item.$orig.type]}}">{{''+(item.$orig.type==='image'?'图片':'视频')+''}}</view></view></block></view></block><block wx:if="{{isDetailMode}}"><view class="detail-view data-v-0401bfc3"><block wx:if="{{currentMedia.type==='image'}}"><view class="image-detail data-v-0401bfc3"><image class="detail-image data-v-0401bfc3" src="{{currentMedia.url}}" mode="widthFix" data-event-opts="{{[['longpress',[['showActionSheet',['$0'],['currentIndex']]]],['tap',[['exitDetailMode',['$event']]]]]}}" bindlongpress="__e" bindtap="__e"></image></view></block><block wx:if="{{currentMedia.type==='video'}}"><view class="video-detail data-v-0401bfc3"><video class="detail-video data-v-0401bfc3" src="{{currentMedia.url}}" controls="{{true}}" autoplay="{{true}}" data-event-opts="{{[['longpress',[['showActionSheet',['$0'],['currentIndex']]]],['tap',[['toggleVideoControls',['$event']]]]]}}" bindlongpress="__e" bindtap="__e"></video><block wx:if="{{!showVideoControls}}"><view class="video-tip data-v-0401bfc3">点击显示控制栏</view></block></view></block><block wx:if="{{currentIndex>0}}"><view data-event-opts="{{[['tap',[['prevMedia',['$event']]]]]}}" class="nav-indicator left data-v-0401bfc3" bindtap="__e"><view class="arrow data-v-0401bfc3"></view></view></block><block wx:if="{{currentIndex<$root.g0-1}}"><view data-event-opts="{{[['tap',[['nextMedia',['$event']]]]]}}" class="nav-indicator right data-v-0401bfc3" bindtap="__e"><view class="arrow data-v-0401bfc3"></view></view></block><view class="page-indicator data-v-0401bfc3"><text class="data-v-0401bfc3">{{currentIndex+1+" / "+$root.g1}}</text></view><view data-event-opts="{{[['tap',[['exitDetailMode',['$event']]]]]}}" class="back-btn data-v-0401bfc3" bindtap="__e"><image class="back-img data-v-0401bfc3" src="/static/最小化.png" mode="widthFix" alt="返回按钮"></image></view></view></block></view>