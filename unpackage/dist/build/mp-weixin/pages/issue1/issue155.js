(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/issue1/issue155"],{"2d67":function(e,i,t){},"3c09":function(e,i,t){"use strict";t.d(i,"b",(function(){return n})),t.d(i,"c",(function(){return o})),t.d(i,"a",(function(){}));var n=function(){var e=this,i=e.$createElement,t=(e._self._c,e.isDetailMode?null:e.__map(e.mediaList,(function(i,t){var n=e.__get_orig(i),o="video"===i.type?e.getVideoThumbnail(i.url):null;return{$orig:n,m0:o}}))),n=e.isDetailMode?e.mediaList.length:null,o=e.isDetailMode?e.mediaList.length:null;e.$mp.data=Object.assign({},{$root:{l0:t,g0:n,g1:o}})},o=[]},"50a1":function(e,i,t){"use strict";(function(e,i){var n=t("47a9");t("f68b");n(t("3240"));var o=n(t("f0b9"));e.__webpack_require_UNI_MP_PLUGIN__=t,i(o.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},a345:function(e,i,t){"use strict";t.r(i);var n=t("e1c4"),o=t.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){t.d(i,e,(function(){return n[e]}))}(s);i["default"]=o.a},e1c4:function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t={data:function(){return{mediaList:[{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/1.jpg",type:"image"},{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/2.jpg",type:"image"},{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/3.jpg",type:"image"},{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/4.jpg",type:"image"},{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/5.jpg",type:"image"},{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/6.jpg",type:"image"},{url:"https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%B8%80%E6%9C%9F/%E6%B4%BB%E5%8A%A8%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/7.27%E7%BA%BF%E4%B8%8B%E9%85%8D%E9%9F%B3/7.mp4",type:"video"}],isDetailMode:!1,currentIndex:0,showVideoControls:!0}},computed:{currentMedia:function(){return this.mediaList[this.currentIndex]||{}}},onLoad:function(){var i=e.getSystemInfoSync();this.screenWidth=i.screenWidth,this.screenHeight=i.screenHeight},methods:{enterDetailMode:function(i){this.currentIndex=i,this.isDetailMode=!0,e.hideNavigationBarLoading()},exitDetailMode:function(){this.isDetailMode=!1,e.showNavigationBarLoading()},getVideoThumbnail:function(e){return this.mediaList[0].url},prevMedia:function(){this.currentIndex>0&&(this.currentIndex--,this.resetVideoState())},nextMedia:function(){this.currentIndex<this.mediaList.length-1&&(this.currentIndex++,this.resetVideoState())},resetVideoState:function(){"video"===this.currentMedia.type&&(this.showVideoControls=!0)},toggleVideoControls:function(){this.showVideoControls=!this.showVideoControls},showActionSheet:function(i){var t=this,n=this.mediaList[i],o=["保存到相册"];"video"===n.type&&o.push("发送给朋友"),e.showActionSheet({itemList:o,success:function(e){switch(e.tapIndex){case 0:t.downloadMedia(i);break;case 1:t.shareMedia(i);break}}})},downloadMedia:function(i){var t=this,n=this.mediaList[i];e.showLoading({title:"image"===n.type?"图片保存中...":"视频保存中...",mask:!0}),e.downloadFile({url:n.url,success:function(i){200===i.statusCode?"image"===n.type?t.saveImageToPhotosAlbum(i.tempFilePath):t.saveVideoToPhotosAlbum(i.tempFilePath):(e.hideLoading(),e.showToast({title:"下载失败",icon:"none"}))},fail:function(i){e.hideLoading(),console.error("下载失败:",i),e.showToast({title:"下载失败",icon:"none"})}})},saveImageToPhotosAlbum:function(i){var t=this;e.saveImageToPhotosAlbum({filePath:i,success:function(){e.hideLoading(),e.showToast({title:"图片已保存",icon:"success"})},fail:function(e){t.handleSaveError(e)}})},saveVideoToPhotosAlbum:function(i){var t=this;e.saveVideoToPhotosAlbum({filePath:i,success:function(){e.hideLoading(),e.showToast({title:"视频已保存",icon:"success"})},fail:function(e){t.handleSaveError(e)}})},handleSaveError:function(i){e.hideLoading(),i.errMsg.includes("auth deny")||i.errMsg.includes("permission denied")?e.showModal({title:"权限不足",content:"请在设置中开启保存到相册的权限",confirmText:"去设置",success:function(i){i.confirm&&e.openSetting()}}):e.showToast({title:"保存失败",icon:"none"})},shareMedia:function(i){e.showToast({title:"分享功能已触发",icon:"success"})}},onShareAppMessage:function(){var e=this.mediaList[this.currentIndex];return{title:"image"===e.type?"分享图片":"分享视频",path:"/pages/media-gallery/media-gallery",imageUrl:"image"===e.type?e.url:this.getVideoThumbnail(e.url)}}};i.default=t}).call(this,t("df3c")["default"])},f0b9:function(e,i,t){"use strict";t.r(i);var n=t("3c09"),o=t("a345");for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(i,e,(function(){return o[e]}))}(s);t("fb6e");var a=t("828b"),c=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"0401bfc3",null,!1,n["a"],void 0);i["default"]=c.exports},fb6e:function(e,i,t){"use strict";var n=t("2d67"),o=t.n(n);o.a}},[["50a1","common/runtime","common/vendor"]]]);