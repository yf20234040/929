<view class="{{['container',(careMode)?'care-mode':'']}}"><view class="custom-navbar" style="{{'padding-top:'+(statusBarHeight)+';'}}"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="nav-left" bindtap="__e"><text class="nav-back">←</text></view><view class="nav-center"><text class="nav-title">编辑资料</text></view><view class="nav-right"><text data-event-opts="{{[['tap',[['saveProfile',['$event']]]]]}}" class="nav-save" bindtap="__e">保存</text></view></view><scroll-view class="content" style="{{'padding-bottom:'+(safeAreaBottom)+';'}}" scroll-y="true"><view class="avatar-section"><view class="avatar-container"><view class="avatar"><block wx:if="{{formData.avatarUrl}}"><image class="avatar-image" src="{{formData.avatarUrl}}" mode="aspectFill" data-event-opts="{{[['error',[['handleAvatarError',['$event']]]]]}}" binderror="__e"></image></block><block wx:else><text class="avatar-text">{{formData.nickName?$root.g0:formData.name?$root.g1:'👤'}}</text></block></view><view data-event-opts="{{[['tap',[['changeAvatar',['$event']]]]]}}" class="avatar-edit" bindtap="__e"><text class="edit-icon">📷</text></view></view><text class="avatar-tip">点击更换头像（支持拍照和相册选择）</text></view><view class="form-section"><view class="form-title">基本信息</view><view class="form-item"><view class="form-label"><text class="label-icon">👤</text><text class="label-text">昵称</text></view><input class="form-input" placeholder="请输入您的昵称" maxlength="20" data-event-opts="{{[['input',[['__set_model',['$0','nickName','$event',[]],['formData']]]]]}}" value="{{formData.nickName}}" bindinput="__e"/></view><view class="form-item"><view class="form-label"><text class="label-icon">📝</text><text class="label-text">真实姓名</text></view><input class="form-input" placeholder="请输入您的真实姓名（可选）" maxlength="20" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['formData']]]]]}}" value="{{formData.name}}" bindinput="__e"/></view><view class="form-item"><view class="form-label"><text class="label-icon">🎂</text><text class="label-text">年龄</text></view><input class="form-input" placeholder="请输入您的年龄" type="number" maxlength="3" data-event-opts="{{[['input',[['__set_model',['$0','age','$event',[]],['formData']]]]]}}" value="{{formData.age}}" bindinput="__e"/></view><view class="form-item"><view class="form-label"><text class="label-icon">⚧</text><text class="label-text">性别</text></view><view class="gender-selector"><view data-event-opts="{{[['tap',[['selectGender',['男']]]]]}}" class="{{['gender-option',(formData.gender==='男')?'active':'']}}" bindtap="__e"><text class="gender-icon">👨</text><text class="gender-text">男</text></view><view data-event-opts="{{[['tap',[['selectGender',['女']]]]]}}" class="{{['gender-option',(formData.gender==='女')?'active':'']}}" bindtap="__e"><text class="gender-icon">👩</text><text class="gender-text">女</text></view><view data-event-opts="{{[['tap',[['selectGender',['其他']]]]]}}" class="{{['gender-option',(formData.gender==='其他')?'active':'']}}" bindtap="__e"><text class="gender-icon">🤖</text><text class="gender-text">其他</text></view></view></view><view class="form-item"><view class="form-label"><text class="label-icon">🏷️</text><text class="label-text">身份标签</text></view><view class="user-type-selector"><view data-event-opts="{{[['tap',[['selectUserType',['学生']]]]]}}" class="{{['user-type-option',(formData.userType==='学生')?'active':'']}}" bindtap="__e"><text class="user-type-icon">🎓</text><text class="user-type-text">学生</text></view><view data-event-opts="{{[['tap',[['selectUserType',['老师']]]]]}}" class="{{['user-type-option',(formData.userType==='老师')?'active':'']}}" bindtap="__e"><text class="user-type-icon">👨‍🏫</text><text class="user-type-text">老师</text></view></view></view><view class="form-item readonly"><view class="form-label"><text class="label-icon">📱</text><text class="label-text">手机号</text></view><view class="form-value">{{userInfo.phone||'未绑定'}}</view></view></view><view class="form-section"><view class="form-title">其他设置</view><view class="form-item"><view class="form-label"><text class="label-icon">💬</text><text class="label-text">个性签名</text></view><textarea class="form-textarea" placeholder="介绍一下自己吧..." maxlength="100" data-event-opts="{{[['input',[['__set_model',['$0','signature','$event',[]],['formData']]]]]}}" value="{{formData.signature}}" bindinput="__e"></textarea><view class="char-count">{{$root.g2+"/100"}}</view></view></view><view class="save-section"><button class="save-btn" disabled="{{saving}}" data-event-opts="{{[['tap',[['saveProfile',['$event']]]]]}}" bindtap="__e">{{''+(saving?'保存中...':'保存修改')+''}}</button></view></scroll-view></view>