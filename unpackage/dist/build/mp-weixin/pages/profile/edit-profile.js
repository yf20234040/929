(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/profile/edit-profile"],{"47b7":function(t,e,a){"use strict";var r=a("efe5"),n=a.n(r);n.a},"57d6":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,a=(t._self._c,!t.formData.avatarUrl&&t.formData.nickName?t.formData.nickName.charAt(0):null),r=t.formData.avatarUrl||t.formData.nickName||!t.formData.name?null:t.formData.name.charAt(0),n=t.formData.signature.length;t.$mp.data=Object.assign({},{$root:{g0:a,g1:r,g2:n}})},n=[]},6182:function(t,e,a){"use strict";(function(t,e){var r=a("47a9");a("f68b");r(a("3240"));var n=r(a("dd1f"));t.__webpack_require_UNI_MP_PLUGIN__=a,e(n.default)}).call(this,a("3223")["default"],a("df3c")["createPage"])},"668f":function(t,e,a){"use strict";a.r(e);var r=a("e446"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(o);e["default"]=n.a},dd1f:function(t,e,a){"use strict";a.r(e);var r=a("57d6"),n=a("668f");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("47b7");var s=a("828b"),i=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=i.exports},e446:function(t,e,a){"use strict";(function(t){var r=a("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(a("7ca3")),o=r(a("f24a"));function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){(0,n.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={mixins:[o.default],data:function(){return{statusBarHeight:"40px",safeAreaBottom:"40rpx",userInfo:{},formData:{nickName:"",name:"",age:"",gender:"",userType:"",signature:"",avatarUrl:""},saving:!1}},onLoad:function(){var e=t.getSystemInfoSync();this.statusBarHeight=e.statusBarHeight?e.statusBarHeight+"px":"40px",e.safeAreaInsets&&(this.safeAreaBottom=(e.safeAreaInsets.bottom||0)+40+"rpx"),this.loadUserInfo()},methods:{loadUserInfo:function(){var e=t.getStorageSync("userInfo");this.userInfo=e||{},this.formData={nickName:this.userInfo.nickName||"",name:this.userInfo.name||"",age:this.userInfo.age||"",gender:this.userInfo.gender||"",userType:this.userInfo.userType||"",signature:this.userInfo.signature||"",avatarUrl:this.userInfo.avatarUrl||""}},goBack:function(){t.navigateBack()},changeAvatar:function(){var e=this;t.showActionSheet({itemList:["拍照","从相册选择"],success:function(t){0===t.tapIndex?e.takePhoto():1===t.tapIndex&&e.chooseImage()}})},takePhoto:function(){var e=this;t.chooseImage({count:1,sourceType:["camera"],success:function(t){e.uploadAvatar(t.tempFilePaths[0])},fail:function(e){console.error("拍照失败:",e),t.showToast({title:"拍照失败",icon:"error"})}})},chooseImage:function(){var e=this;t.chooseImage({count:1,sourceType:["album"],success:function(t){e.uploadAvatar(t.tempFilePaths[0])},fail:function(e){console.error("选择图片失败:",e),t.showToast({title:"选择图片失败",icon:"error"})}})},uploadAvatar:function(e){var a=this;t.showLoading({title:"处理中..."}),setTimeout((function(){a.formData.avatarUrl=e,t.hideLoading(),t.showToast({title:"头像已选择",icon:"success"})}),500)},handleAvatarError:function(){console.log("头像加载失败，使用默认头像"),this.formData.avatarUrl=""},selectGender:function(t){this.formData.gender=t},selectUserType:function(t){this.formData.userType=t},saveProfile:function(){var e=this;if(!this.saving)if(this.formData.nickName.trim())if(this.formData.age&&(isNaN(this.formData.age)||this.formData.age<1||this.formData.age>120))t.showToast({title:"请输入有效年龄",icon:"none"});else{this.saving=!0;var a=i(i({},this.userInfo),{},{nickName:this.formData.nickName.trim(),name:this.formData.name.trim(),age:this.formData.age,gender:this.formData.gender,userType:this.formData.userType,signature:this.formData.signature.trim(),avatarUrl:this.formData.avatarUrl});t.setStorageSync("userInfo",a),t.showToast({title:"保存成功",icon:"success",duration:1500}),setTimeout((function(){e.saving=!1,t.navigateBack()}),1500)}else t.showToast({title:"请输入昵称",icon:"none"})}}};e.default=c}).call(this,a("df3c")["default"])},efe5:function(t,e,a){}},[["6182","common/runtime","common/vendor"]]]);