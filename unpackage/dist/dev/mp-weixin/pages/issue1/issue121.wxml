<view class="container data-v-34463205"><view class="tabs data-v-34463205"><view data-event-opts="{{[['tap',[['switchTab',[0]]]]]}}" class="{{['tab-item','data-v-34463205',(currentTab===0)?'active':'']}}" bindtap="__e"><text class="tab-text data-v-34463205">媒体记录</text></view><view data-event-opts="{{[['tap',[['switchTab',[1]]]]]}}" class="{{['tab-item','data-v-34463205',(currentTab===1)?'active':'']}}" bindtap="__e"><text class="tab-text data-v-34463205">文件列表</text></view></view><view class="content data-v-34463205"><block wx:if="{{currentTab===0}}"><view class="media-content data-v-34463205"><scroll-view class="media-scroll data-v-34463205" scroll-y="{{true}}"><block wx:for="{{$root.l1}}" wx:for-item="group" wx:for-index="groupIndex" wx:key="groupIndex"><view class="media-group data-v-34463205"><view class="group-title data-v-34463205"><text class="data-v-34463205">{{group.$orig.title}}</text><block wx:if="{{group.$orig.description}}"><text class="group-desc data-v-34463205">{{group.$orig.description}}</text></block></view><view class="thumbnail-grid data-v-34463205"><block wx:for="{{group.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['enterDetailMode',[groupIndex,index]]]],['longpress',[['showActionSheet',[groupIndex,index]]]]]}}" class="media-item data-v-34463205" bindtap="__e" bindlongpress="__e"><block wx:if="{{item.$orig.type==='image'}}"><image class="media-thumbnail data-v-34463205" src="{{item.$orig.url}}" mode="aspectFill" data-event-opts="{{[['error',[['handleImageError',['$0'],[[['customMediaGroups','',groupIndex],['mediaItems','',index]]]]]]]}}" binderror="__e"></image></block><block wx:if="{{item.$orig.type==='video'}}"><view class="video-thumbnail-container data-v-34463205"><image class="media-thumbnail data-v-34463205" src="{{item.m0}}" mode="aspectFill"></image><view class="video-play-icon data-v-34463205"><view class="play-triangle data-v-34463205"></view></view></view></block><view class="{{['media-type-tag','data-v-34463205',item.$orig.type]}}">{{''+(item.$orig.type==='image'?'图片':'视频')+''}}</view><block wx:if="{{item.$orig.title}}"><view class="media-title data-v-34463205"><text class="data-v-34463205">{{item.$orig.title}}</text></view></block></view></block></view></view></block></scroll-view><block wx:if="{{isDetailMode}}"><view class="detail-view data-v-34463205"><block wx:if="{{currentMedia.type==='image'}}"><view class="image-detail data-v-34463205"><image class="detail-image data-v-34463205" src="{{currentMedia.url}}" mode="widthFix" data-event-opts="{{[['longpress',[['showActionSheet',['$0','$1'],['currentGroupIndex','currentItemIndex']]]],['tap',[['exitDetailMode',['$event']]]]]}}" bindlongpress="__e" bindtap="__e"></image><block wx:if="{{currentMedia.title}}"><view class="detail-title data-v-34463205"><text class="data-v-34463205">{{currentMedia.title}}</text></view></block></view></block><block wx:if="{{currentMedia.type==='video'}}"><view class="video-detail data-v-34463205"><video class="detail-video data-v-34463205" src="{{currentMedia.url}}" controls="{{true}}" autoplay="{{true}}" data-event-opts="{{[['longpress',[['showActionSheet',['$0','$1'],['currentGroupIndex','currentItemIndex']]]],['tap',[['toggleVideoControls',['$event']]]]]}}" bindlongpress="__e" bindtap="__e"></video><block wx:if="{{!showVideoControls}}"><view class="video-tip data-v-34463205">点击显示控制栏</view></block><block wx:if="{{currentMedia.title}}"><view class="detail-title data-v-34463205"><text class="data-v-34463205">{{currentMedia.title}}</text></view></block></view></block><block wx:if="{{hasPrevMedia}}"><view data-event-opts="{{[['tap',[['prevMedia',['$event']]]]]}}" class="nav-indicator left data-v-34463205" bindtap="__e"><view class="arrow data-v-34463205"></view></view></block><block wx:if="{{hasNextMedia}}"><view data-event-opts="{{[['tap',[['nextMedia',['$event']]]]]}}" class="nav-indicator right data-v-34463205" bindtap="__e"><view class="arrow data-v-34463205"></view></view></block><view class="page-indicator data-v-34463205"><text class="data-v-34463205">{{currentPosition+" / "+totalMediaCount}}</text></view><view data-event-opts="{{[['tap',[['exitDetailMode',['$event']]]]]}}" class="back-btn data-v-34463205" bindtap="__e"><image class="back-img data-v-34463205" src="/static/最小化.png" mode="widthFix" alt="返回按钮"></image></view></view></block></view></block><block wx:if="{{currentTab===1}}"><view class="file-content data-v-34463205"><scroll-view class="file-scroll data-v-34463205" scroll-y="{{true}}"><view class="file-list data-v-34463205"><block wx:for="{{$root.l2}}" wx:for-item="file" wx:for-index="index" wx:key="id"><view data-event-opts="{{[['tap',[['previewFile',['$0'],[[['fileList','id',file.$orig.id]]]]]]]}}" class="file-item data-v-34463205" bindtap="__e"><view class="file-icon data-v-34463205" style="{{'background-color:'+(file.m1)+';'}}"><text class="iconfont data-v-34463205">{{file.m2}}</text></view><view class="file-info data-v-34463205"><text class="file-name data-v-34463205">{{file.$orig.name}}</text></view><view class="view-btn-container data-v-34463205"><view data-event-opts="{{[['tap',[['viewFile',['$0'],[[['fileList','id',file.$orig.id]]]]]]]}}" class="view-btn data-v-34463205" catchtap="__e"><text class="view-text data-v-34463205">查看</text></view></view></view></block></view></scroll-view></view></block></view></view>