<template>
  <view class="container">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <view class="header">
      <text class="title">ä¼šè®®ç…§ç‰‡</text>
      <text class="subtitle">å¯åŠ¨ä»ªå¼ç²¾å½©ç¬é—´è®°å½•</text>
    </view>

    <!-- ç…§ç‰‡ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="stats-section">
      <view class="stats-card">
        <view class="info-icon">
          <icon type="photo" size="24" color="#1677ff" />
        </view>
        <view class="info-content">
          <text class="stats-number">{{ imgList.length }}</text>
          <text class="stats-label">å¼ ç…§ç‰‡</text>
        </view>
      </view>
      <view class="stats-card">
        <view class="info-icon">
          <icon type="success" size="24" color="#1677ff" />
        </view>
        <view class="info-content">
          <text class="stats-number">1</text>
          <text class="stats-label">ä¸ªæ´»åŠ¨</text>
        </view>
      </view>
      <view class="stats-card">
        <view class="info-icon">
          <icon type="calendar" size="24" color="#1677ff" />
        </view>
        <view class="info-content">
          <text class="stats-number">2024</text>
          <text class="stats-label">å¹´è®°å½•</text>
        </view>
      </view>
    </view>

    <!-- ç…§ç‰‡ç”»å»Š -->
    <view class="section">
      <view class="section-title">
        <text>ğŸ“· å¯åŠ¨ä»ªå¼ç…§ç‰‡é›†</text>
      </view>
      <text class="gallery-desc">ç‚¹å‡»ç…§ç‰‡å¯æŸ¥çœ‹å¤§å›¾</text>
      
      <view class="photo-grid">
        <view
          v-for="(img, index) in imgList"
          :key="index"
          class="photo-card"
          @tap="previewImage(index)"
        >
          <view class="photo-wrapper">
            <image
              :src="img"
              class="photo-image"
              mode="aspectFill"
              lazy-load
            />
            <view class="photo-overlay">
              <text class="overlay-icon">ğŸ”</text>
            </view>
          </view>
          <view class="photo-info">
            <text class="photo-title">å¯åŠ¨ä»ªå¼ç…§ç‰‡ {{ index + 1 }}</text>
            <text class="photo-date">2024-03-30</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <view class="footer">
      <text class="organizer">"æ´è§å†å²"ç ”å­¦ç¬¬äºŒæœŸé¡¹ç›®ç»„</text>
    </view>
  </view>
</template>

<script>
export default {
  data() {
    return {
      // å›¾ç‰‡åˆ—è¡¨ - å®é™…é¡¹ç›®ä¸­å¯æ ¹æ®éœ€è¦æ‰©å±•æˆ–ä»æ¥å£è·å–
      imgList: [
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/1.PNG",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/2.PNG",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/3.PNG",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/4.JPEG",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/5.jpg",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/6.jpg",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/7.jpg",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/8.jpg",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/9.jpg",
        "https://llzm-lixiaobao.oss-cn-beijing.aliyuncs.com/%E4%BA%8C%E6%9C%9F/%E7%AC%AC%E4%BA%8C%E6%9C%9F/%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%90%AF%E5%8A%A8%E4%BB%AA%E5%BC%8F/10.jpg"
      ]
    };
  },
  onLoad() {
    // é¡µé¢åŠ è½½æ—¶å¯è¿›è¡Œæ•°æ®åˆå§‹åŒ–æ“ä½œ
    console.log('ä¼šè®®ç…§ç‰‡é¡µé¢åŠ è½½å®Œæˆ');
  },
  methods: {
    /**
     * é¢„è§ˆå›¾ç‰‡
     * @param {Number} index - å›¾ç‰‡ç´¢å¼•
     */
    previewImage(index) {
      if (!this.imgList || this.imgList.length === 0) return;
      
      uni.previewImage({
        current: this.imgList[index], // å½“å‰æ˜¾ç¤ºå›¾ç‰‡çš„httpé“¾æ¥
        urls: this.imgList, // éœ€è¦é¢„è§ˆçš„å›¾ç‰‡httpé“¾æ¥åˆ—è¡¨
        indicator: 'number', // æ˜¾ç¤ºæ•°å­—æŒ‡ç¤ºå™¨
        loop: true, // æ”¯æŒå¾ªç¯é¢„è§ˆ
        success: (res) => {
          console.log('é¢„è§ˆå›¾ç‰‡æˆåŠŸ', res);
        },
        fail: (err) => {
          console.error('é¢„è§ˆå›¾ç‰‡å¤±è´¥', err);
          uni.showToast({
            title: 'é¢„è§ˆå¤±è´¥ï¼Œè¯·é‡è¯•',
            icon: 'none',
            duration: 2000
          });
        }
      });
    }
  }
};
</script>

<style scoped>
.container {
  background-color: #f5f7fa;
  min-height: 100vh;
  padding: 20rpx;
  box-sizing: border-box;
}

/* æ ‡é¢˜æ ·å¼ */
.header {
  text-align: center;
  padding: 30rpx 20rpx;
  margin-bottom: 20rpx;
  background-color: white;
  border-radius: 16rpx;
  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);
}

.title {
  font-size: 34rpx;
  font-weight: bold;
  color: #1677ff;
  display: block;
  margin-bottom: 15rpx;
}

.subtitle {
  font-size: 26rpx;
  color: #666;
  display: block;
}

/* ç»Ÿè®¡ä¿¡æ¯æ ·å¼ */
.stats-section {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20rpx;
  margin-bottom: 25rpx;
}

.stats-card {
  background-color: white;
  border-radius: 16rpx;
  padding: 25rpx;
  display: flex;
  align-items: center;
  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);
}

.info-icon {
  margin-right: 20rpx;
}

.info-content {
  flex: 1;
}

.stats-number {
  font-size: 28rpx;
  font-weight: bold;
  color: #333;
  display: block;
  margin-bottom: 5rpx;
}

.stats-label {
  font-size: 24rpx;
  color: #666;
}

/* ç…§ç‰‡ç”»å»Šæ ·å¼ */
.section {
  background-color: white;
  border-radius: 16rpx;
  margin-bottom: 25rpx;
  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);
  padding: 0 25rpx 25rpx;
}

.section-title {
  padding: 18rpx 0;
  border-bottom: 1rpx solid #f0f0f0;
  margin-bottom: 20rpx;
}

.section-title text {
  font-size: 30rpx;
  font-weight: bold;
  color: #1677ff;
}

.gallery-desc {
  display: block;
  color: #666;
  font-size: 24rpx;
  margin-bottom: 20rpx;
  padding-left: 5rpx;
}

.photo-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20rpx;
}

.photo-card {
  border-radius: 12rpx;
  overflow: hidden;
  background-color: #f9f9f9;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);
  transition: transform 0.2s ease;
}

.photo-card:active {
  transform: scale(0.98);
}

.photo-wrapper {
  position: relative;
  width: 100%;
  height: 240rpx;
  overflow: hidden;
}

.photo-image {
  width: 100%;
  height: 100%;
  transition: transform 0.3s ease;
}

.photo-card:hover .photo-image {
  transform: scale(1.05);
}

.photo-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.photo-card:hover .photo-overlay {
  opacity: 1;
}

.overlay-icon {
  color: white;
  font-size: 40rpx;
}

.photo-info {
  padding: 15rpx;
}

.photo-title {
  font-size: 24rpx;
  color: #333;
  display: block;
  margin-bottom: 5rpx;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.photo-date {
  font-size: 20rpx;
  color: #999;
}

/* åº•éƒ¨æ ·å¼ */
.footer {
  text-align: center;
  padding: 25rpx 0;
  color: #666;
}

.organizer {
  font-size: 24rpx;
  display: block;
}

/* å“åº”å¼è°ƒæ•´ - é€‚é…ä¸åŒå±å¹•å°ºå¯¸ */
@media (min-width: 750rpx) {
  .photo-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .photo-wrapper {
    height: 280rpx;
  }
}

/* é€‚é…æ›´å¤§å±å¹• */
@media (min-width: 1000rpx) {
  .photo-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}
</style>